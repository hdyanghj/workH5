(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-center-account-account-logout"],{"190f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{system:null,route:null,systemType:null,Timer:null,DataTimeNum:0}},methods:{Time:function(){var t=this,e=getCurrentPages();this.route=e[e.length-1].route,this.Timer=setInterval((function(){t.DataTimeNum++}),1e3)},buryingpoint:function(t){var e,n=this,i=uni.getStorageSync("user_Id");uni.getSystemInfo({success:function(t){n.systemType=t}}),e="ios"==this.systemType.platform?2:1;var o={model:this.systemType.model,version:this.systemType.version,systemVersion:this.system,userId:i,platform:e,route:this.route,name:t,ttl:this.DataTimeNum};uni.request({url:this.$webUrl+this.$buryingpoint,method:"POST",data:o,success:function(t){0==t.data.code&&(clearInterval(n.Timer),n.DataTimeNum=0)},fail:function(t){console.log(JSON.stringify(t))}})}}};e.default=i},"1dca":function(t,e,n){"use strict";n.r(e);var i=n("50ee"),o=n("7003");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var u,s=n("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"0f5ec893",null,!1,i["a"],u);e["default"]=r.exports},"4ab5":function(t,e,n){"use strict";n.r(e);var i=n("e6ab"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},"50ee":function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view")},a=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},5364:function(t,e,n){"use strict";var i=n("7058"),o=n.n(i);o.a},7003:function(t,e,n){"use strict";n.r(e);var i=n("190f"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},7058:function(t,e,n){var i=n("90bb");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("093ed9c1",i,!0,{sourceMap:!1,shadowMode:!1})},"7cf6":function(t,e,n){"use strict";var i=n("ee27");n("c975"),n("ac1f"),n("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("e143")),a={downBtn:function(){setTimeout((function(){var t=window.navigator.userAgent.toLowerCase();-1!=t.indexOf("huawei")?window.location="https://appgallery.cloud.huawei.com/uowap/index.html#/detailApp/C100740675?detailType=&subsource=C100740675&referrer=&s=&shareFrom=appmarket&v=&shareTo=weixin&source=appshare&id=&locale=zh_CN&channelId=":-1!=t.indexOf("vivo")?window.location="https://h5coml.vivo.com.cn/h5coml/appdetail_h5/browser_v2/index.html?appId=2757924&resource=301&source=2":-1!=t.indexOf("xiaomi")?window.location="http://app.xiaomi.com/detail/796164":-1!=t.indexOf("iphone")?window.location="https://apps.apple.com/cn/app/%E4%BD%93%E8%AF%AD/id1460747699":window.location="https://a.app.qq.com/o/simple.jsp?pkgname=com.tiyu.app&fromcase=40003"}),500)},notLogin:function(t){console.log("登陆失效验证："),console.log(JSON.stringify(t));var e=t.code,n=t.msg||t.error;if(100005001==e||100005002==e){uni.clearStorage(),n="token不能为空"==n?"未登录":n.replace(/token/g,"登录"),uni.showToast({icon:"none",title:n,duration:1500});getCurrentPages();setTimeout((function(){uni.navigateTo({url:"/pages/login/login"})}),1500)}else 100005015==e?(console.log(e),uni.setStorageSync("vip",0),uni.showToast({icon:"none",title:n,duration:1500}),setTimeout((function(){uni.navigateBack({delta:1})}),1500)):uni.showToast({icon:"none",title:n,duration:1500})},integralSave:function(t){var e=t.url,n=t.data,i=t.token,o=t.cb;i&&uni.request({url:e,method:"POST",header:{token:i},data:n,success:function(t){o&&o()}})},showModal:function(t,e){var n=this;uni.showModal({title:"提示",content:"注册会员，能够从任何iOS设备访问个人信息及内容，是否注册？",cancelText:"游客访问",confirmText:"注册登陆",success:function(i){i.confirm?uni.navigateTo({url:"../login/login"}):i.cancel&&n.visitorLogin({url:t,url2:e})}})},visitorLogin:function(t){var e=t.url,n=t.url2,i=this,o=plus.device.uuid;console.log(o),uni.request({url:e,data:{openId:o,unionid:o},success:function(t){console.log("获取用户信息"),console.log(JSON.stringify(t)),3==t.data.data.code?i.register(n,o):i.saveUserInfo(t.data.data)}})},register:function(t,e){var n=this;uni.request({url:t,method:"POST",data:{openid:e,unionid:e},success:function(t){console.log("注册"),console.log(JSON.stringify(t)),n.saveUserInfo(t.data.data)}})},saveUserInfo:function(t){uni.setStorage({key:"user_Info",data:{username:t.user.username,headSculpture:t.user.headSculpture,remarks:t.user.remarks,gender:t.user.gender,birthday:t.user.birthday,email:t.user.email,mobile:t.user.mobile}}),uni.setStorage({key:"user_Id",data:t.user.id}),uni.setStorage({key:"token",data:t.token}),uni.setStorage({key:"postureTestNumber",data:t.user.postureTestNumber})},statisticalClicks:function(t){var e=o.default.prototype;uni.request({url:e.$webUrl+e.$recordClicks,method:"POST",data:t,success:function(t){console.log("统计点击量 ："),console.log(t)},fail:function(t){console.log(t)}})},sharingApplet:function(t){console.log(JSON.stringify(t));var e=o.default.prototype,n=this,i=e.$userSharingRecord;void 0!=t.courseflag&&2==t.courseflag&&(i=e.$courseShareLock),uni.request({url:e.$webUrl+i,header:{token:t.token},data:{href:t.href,shareChannel:t.subMsg,shareContent:t.summary,shareImg:t.imageUrl,shareTitle:t.title,shareType:t.shareType,userId:t.userId,markId:t.id,module:t.module},method:"POST",success:function(i){console.log("分享记录"+JSON.stringify(i)),console.log(e.$webUrl),console.log(e.$userintegralrecord),n.integralSave({url:e.$webUrl+e.$userintegralrecord,data:{integralOperate:1,integralType:4,title:"分享送积分",userId:t.userId},token:t.token}),n.shareFun(t)},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接不稳定，请检查网络"})}})},shareFun:function(t){console.log("我进来了"),console.log(JSON.stringify(t)),uni.share({provider:"weixin",type:t.shareType,imageUrl:t.imageUrl,title:t.title,miniProgram:{id:"gh_bb081e4b31c9",path:t.href,type:0,webUrl:t.webHref},success:function(t){console.log(JSON.stringify(t))}})},getMembers:function(t,e,n){var i=this;uni.request({url:t,header:{"content-type":"application/x-www-form-urlencoded",token:e},data:{userId:n},method:"GET",success:function(t){if(0==t.data.code){var e=t.data.data;console.log(e),uni.setStorage({key:"memberInfo",data:e})}else i.notLogin(t.data)},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接不稳定，请检查网络"})}})}};e.default=a},"90bb":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-6bb7bbb6]{height:100%}.center-list[data-v-6bb7bbb6]{width:%?660?%;height:100%;margin:0 auto}.caveat-main[data-v-6bb7bbb6]{padding:%?20?% 0;text-align:center}.caveat[data-v-6bb7bbb6]{color:#ff4600;font-size:%?100?%}.prompt-title[data-v-6bb7bbb6]{padding:%?20?% 0;text-align:center;font-size:%?36?%;font-weight:700}.prompt-text[data-v-6bb7bbb6]{padding-bottom:%?40?%;text-align:center;font-size:%?24?%;color:#909090}.prompt-main[data-v-6bb7bbb6]{background:#efefef;padding:%?40?%;border-radius:%?20?%;font-size:%?28?%;color:#585858}.prompt-list[data-v-6bb7bbb6]{padding:%?10?% 0}.submit-btn[data-v-6bb7bbb6]{padding:%?60?% 0 %?40?%}.pact-text[data-v-6bb7bbb6]{font-size:%?24?%;text-align:center;color:#909090}.pact-btn[data-v-6bb7bbb6]{display:inline-block;color:#000}.v-code[data-v-6bb7bbb6]{width:100%;height:calc(100% - %?66?%)}.login-title[data-v-6bb7bbb6]{margin:0}.login-password[data-v-6bb7bbb6]{font-size:%?34?%;color:#4a4a4a}.login-mobile-cont[data-v-6bb7bbb6]{width:100%;height:%?54?%;padding:%?40?% 0 %?10?%;border-bottom:1px solid #efefef;display:-webkit-box;display:-webkit-flex;display:flex;position:relative}.login-mobile-input[data-v-6bb7bbb6]{padding-left:%?20?%}.login-mobile-input uni-input[data-v-6bb7bbb6]{height:%?54?%;line-height:%?54?%;font-size:%?32?%}.login-password[data-v-6bb7bbb6]{padding-top:%?50?%}.login-xianshi[data-v-6bb7bbb6]{height:%?54?%;line-height:%?54?%;position:absolute;right:%?0?%;top:%?40?%;font-size:%?26?%}.huoqu-button[data-v-6bb7bbb6]{height:%?58?%!important;border-radius:%?10?%!important;font-size:%?26?%!important;color:#03b2ca;background:none}.huoqu-button.button-hover[data-v-6bb7bbb6]{background:none}.huoqu-button[data-v-6bb7bbb6]:after{border:0}.login-tishi[data-v-6bb7bbb6]{padding-top:%?40?%;font-size:%?26?%;color:#ccc}",""]),t.exports=e},a64e:function(t,e,n){"use strict";n.r(e);var i=n("e8e4"),o=n("4ab5");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("5364");var u,s=n("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"6bb7bbb6",null,!1,i["a"],u);e["default"]=r.exports},e6ab:function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("1dca")),a=i(n("7cf6")),u={components:{buryingpoint:o.default},data:function(){return{infoMain:!0,phoneMain:!1,loading:!1,status:!1,num:60,huoqucode:"获取验证码",mobilenumber:"",phonenumber:"",timer:null,numberText:null}},onNavigationBarButtonTap:function(t){0==t.index&&uni.navigateBack({delta:1})},onShow:function(){var t=this;setTimeout((function(){t.$refs.buryingpoint.Time()}),10)},onHide:function(){this.$refs.buryingpoint.buryingpoint("注销账号")},onUnload:function(){this.$refs.buryingpoint.buryingpoint("注销账号")},mounted:function(){this.aCode()},methods:{pactText:function(){uni.navigateTo({url:"/pages/center/account/cancellation-agreement"})},pactBtn:function(){var t=this;uni.showModal({title:"注销账号确认",content:"注销账号会清空所有信息和数据，请确认是否注销",cancelText:"考虑一下",confirmText:"立即注销",success:function(e){e.confirm?(console.log("立即注销"),t.infoMain=!1,t.phoneMain=!0,t.makeRequest()):e.cancel&&console.log("考虑一下")}})},aCode:function(){var t=this,e="";uni.getStorageSync("AreaCode")&&(uni.getStorageSync("AreaCode").code,e=uni.getStorageSync("AreaCode").phoneNumber),t.mobilenumber=e.substring(0,3)+"****"+e.substring(7,11),t.phonenumber=e},verifyFun:function(){var t=this;console.log(t.numberText.length),4==t.numberText.length?uni.request({url:t.$webUrl+t.$SmsCaptcha,header:{"content-type":"application/x-www-form-urlencoded",token:""+uni.getStorageSync("token")},data:{mobile:t.phonenumber,captcha:t.numberText},method:"PUT",success:function(e){console.log("验证-验证码",e);e.data.data;if(0==e.data.code)uni.request({url:t.$webUrl+t.$logoff,header:{"content-type":"application/x-www-form-urlencoded",token:""+uni.getStorageSync("token")},method:"DELETE",success:function(t){console.log("注销",t),0==t.data.code?(uni.showToast({icon:"none",duration:3e3,title:"注销成功"}),uni.clearStorage(),setTimeout((function(){uni.switchTab({url:"/pages/center/center"})}),2e3)):a.default.notLogin(t.data)},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接不稳定，请检查网络"})},complete:function(){t.loading=!1}});else{if(100005006==e.data.code)return void uni.showToast({icon:"none",duration:3e3,title:"验证码错误"});if(100005005==e.data.code)return void uni.showToast({icon:"none",duration:3e3,title:"验证码不存在"});a.default.notLogin(e.data)}},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接不稳定，请检查网络"})},complete:function(){t.loading=!1}}):uni.showToast({icon:"none",duration:3e3,title:"验证码错误"})},makeRequest:function(){var t=this;console.log("注销时，请求服务器发送验证码接口传参："+t.phonenumber),t.loading=!0,uni.request({url:t.$msgUrl+t.$sendMessage,header:{"content-type":"application/x-www-form-urlencoded"},data:{mobile:t.phonenumber},method:"POST",success:function(e){return console.log(JSON.stringify(e)),0==e.data.code?(t.obtainCode(),void uni.showToast({icon:"none",duration:3e3,title:"发送成功"})):100003004==e.data.code?void uni.showToast({icon:"none",duration:3e3,title:"短信发送次数超限"}):void uni.showToast({icon:"none",duration:3e3,title:"发送失败"})},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"发送失败"})},complete:function(){t.loading=!1}})},obtainCode:function(){var t=this;t.status||(t.status=!0,t.loadingTiming(),t.timer=setInterval((function(){0===t.num?(t.timer&&t.clearTimer(),t.reset()):t.loadingTiming()}),1e3))},reset:function(){var t=this;t.num=60,t.status=!1,t.disabled="",t.huoqucode="重新获取"},loadingTiming:function(){var t=this;t.num-=1,t.huoqucode="获取中("+t.num+")"},clearTimer:function(){var t=this;clearInterval(t.timer),t.timer=null}}};e.default=u},e8e4:function(t,e,n){"use strict";var i={buryingpoint:n("1dca").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"center-list"},[n("v-uni-view",{staticClass:"first-title"},[t._v("注销账号")]),1==t.infoMain?n("v-uni-view",[n("v-uni-view",{staticClass:"caveat-main"},[n("v-uni-text",{staticClass:"caveat iconfont"},[t._v("")])],1),n("v-uni-view",{staticClass:"prompt-title"},[t._v("将"+t._s(t.mobilenumber)+"所绑定的账号注销")]),n("v-uni-view",{staticClass:"prompt-text"},[t._v("注销帐号后，您将无法再使用本帐号，也将无法找回您帐号中及与帐号相关的任何内容或信息，包括但不限于：")]),n("v-uni-view",{staticClass:"prompt-main"},[n("v-uni-view",{staticClass:"prompt-list"},[t._v("●  您将无法继续使用该帐号进行登录")]),n("v-uni-view",{staticClass:"prompt-list"},[t._v("●  您帐号的个人资料和历史信息都将无法找回")]),n("v-uni-view",{staticClass:"prompt-list"},[t._v("●  您理解并同意，注销帐号后，您曾获得的虚拟货币将视为您自愿、主动放弃，无法继续使用；虚拟交易等虚拟财产信息等将全部清除")])],1),n("v-uni-view",{staticClass:"submit-btn"},[n("v-uni-button",{staticClass:"normalButton",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pactBtn()}}},[t._v("下一步")])],1),n("v-uni-view",{staticClass:"pact-text"},[t._v("点击【下一步】即代表你已经同意"),n("v-uni-view",{staticClass:"pact-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pactText.apply(void 0,arguments)}}},[t._v("《用户注销协议》")])],1)],1):t._e(),1==t.phoneMain?n("v-uni-view",{staticClass:"v-code"},[n("v-uni-view",{staticClass:"login-title"},[t._v("请输入验证码")]),n("v-uni-view",{staticClass:"login-mobile-cont"},[n("v-uni-view",{staticClass:"login-mobile-input"},[n("v-uni-input",{attrs:{type:"number",maxlength:"4",focus:"true"},model:{value:t.numberText,callback:function(e){t.numberText=e},expression:"numberText"}})],1),n("v-uni-view",{staticClass:"login-xianshi"},[n("v-uni-button",{staticClass:"huoqu-button",attrs:{size:"mini",disabled:t.status,loading:t.loading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.makeRequest.apply(void 0,arguments)}}},[t._v(t._s(t.huoqucode))])],1)],1),n("v-uni-view",{staticClass:"login-tishi"},[t._v("已经向"+t._s(t.mobilenumber)+"发送了一个验证码")]),n("v-uni-view",{staticClass:"submit-btn"},[n("v-uni-button",{staticClass:"normalButton",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.verifyFun()}}},[t._v("注销")])],1)],1):t._e(),n("buryingpoint",{ref:"buryingpoint"})],1)},a=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))}}]);