(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-communication-pay"],{"0735":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAQCAMAAAA25D/gAAAARVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////9SnXPCAAAAFnRSTlMAEOfGC9zNCOHXJhwV0b64IBkqlXRqFrwYXgAAAF1JREFUGNOFzUsOgCAQA9BB8A+oqHP/ozoxmIkhhS6aJm9RgvGB76oGD9UEnis6tPTI+0w1vbhLWGncPlftX1Vf/roSATdWtXRXqngUB6qOVCDytDsrRYQcab4t9QHuXgWI+D9VbwAAAABJRU5ErkJggg=="},"190f":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{system:null,route:null,systemType:null,Timer:null,DataTimeNum:0}},methods:{Time:function(){var e=this,t=getCurrentPages();this.route=t[t.length-1].route,this.Timer=setInterval((function(){e.DataTimeNum++}),1e3)},buryingpoint:function(e){var t,i=this,n=uni.getStorageSync("user_Id");uni.getSystemInfo({success:function(e){i.systemType=e}}),t="ios"==this.systemType.platform?2:1;var o={model:this.systemType.model,version:this.systemType.version,systemVersion:this.system,userId:n,platform:t,route:this.route,name:e,ttl:this.DataTimeNum};uni.request({url:this.$webUrl+this.$buryingpoint,method:"POST",data:o,success:function(e){0==e.data.code&&(clearInterval(i.Timer),i.DataTimeNum=0)},fail:function(e){console.log(JSON.stringify(e))}})}}};t.default=n},"1dca":function(e,t,i){"use strict";i.r(t);var n=i("50ee"),o=i("7003");for(var r in o)"default"!==r&&function(e){i.d(t,e,(function(){return o[e]}))}(r);var a,u=i("f0c5"),s=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,"0f5ec893",null,!1,n["a"],a);t["default"]=s.exports},"1de5":function(e,t,i){"use strict";e.exports=function(e,t){return t||(t={}),e=e&&e.__esModule?e.default:e,"string"!==typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},"2bcf":function(e,t,i){var n=i("be4e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("4f06").default;o("cd4ccaaa",n,!0,{sourceMap:!1,shadowMode:!1})},"50ee":function(e,t,i){"use strict";var n,o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view")},r=[];i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return n}))},7003:function(e,t,i){"use strict";i.r(t);var n=i("190f"),o=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t["default"]=o.a},"7a8f":function(e,t,i){"use strict";var n=i("2bcf"),o=i.n(n);o.a},"7d50":function(e,t,i){"use strict";i.r(t);var n=i("9625"),o=i("aadc");for(var r in o)"default"!==r&&function(e){i.d(t,e,(function(){return o[e]}))}(r);i("7a8f");var a,u=i("f0c5"),s=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,"8c1ad988",null,!1,n["a"],a);t["default"]=s.exports},9625:function(e,t,i){"use strict";var n={buryingpoint:i("1dca").default},o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"title"},[e._v("选择支付方式")]),i("v-uni-view",{staticClass:"timeout"},[e._v("请您在 30分钟 内完成支付")]),e._l(e.providerList,(function(t,n){return"appleiap"!=t.id?i("v-uni-view",{staticClass:"item",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.toggleChecked(t.id)}}},[i("v-uni-image",{attrs:{src:"/static/pay-"+t.id+".png"}}),i("v-uni-view",{staticClass:"middle"},[i("v-uni-view",[e._v(e._s(t.name)+"支付")]),i("v-uni-view",[e._v(e._s(t.name)+"安全支付")])],1),i("v-uni-view",{class:["choose",t.id==e.type?"checked":""]})],1):e._e()})),i("v-uni-view",{staticClass:"item"},[i("v-uni-image",{attrs:{src:"/static/pay-wxpay.png"}}),i("v-uni-view",{staticClass:"middle"},[i("v-uni-view",[e._v("微信支付")]),i("v-uni-view",[e._v("微信安全支付")])],1)],1),i("v-uni-view",{staticClass:"pay h5pay",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getOrderInfo.apply(void 0,arguments)}}},[e._v("确认支付（¥"+e._s(e.fee)+"）")]),i("buryingpoint",{ref:"buryingpoint"})],2)},r=[];i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return n}))},aadc:function(e,t,i){"use strict";i.r(t);var n=i("de73"),o=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t["default"]=o.a},be4e:function(e,t,i){var n=i("24fb"),o=i("1de5"),r=i("0735");t=n(!1);var a=o(r);t.push([e.i,".title[data-v-8c1ad988]{padding:%?45?%;font-size:%?40?%;line-height:%?56?%}.timeout[data-v-8c1ad988]{width:%?750?%;height:%?72?%;padding-left:%?45?%;box-sizing:border-box;background:rgba(255,0,0,.15);font-size:%?24?%;line-height:%?72?%}.item[data-v-8c1ad988]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?750?%;height:%?128?%;padding:%?35?% %?45?%;box-sizing:border-box;background:#fff}.item>uni-image[data-v-8c1ad988]{width:%?52?%;height:%?52?%;margin-right:%?30?%}.middle>uni-view[data-v-8c1ad988]:first-child{font-size:%?32?%;line-height:%?44?%}.middle>uni-view[data-v-8c1ad988]:last-child{font-size:%?24?%;line-height:%?34?%;color:#9d9d9d}.middle[data-v-8c1ad988]{width:100%;-webkit-box-flex:1;-webkit-flex:1;flex:1}.choose[data-v-8c1ad988]{width:%?36?%;height:%?36?%;box-sizing:border-box;border-radius:50%;border:1px solid grey}.checked[data-v-8c1ad988]{background:#03b2ca url("+a+") no-repeat 50%;background-size:%?30?% auto;opacity:.45;border:0}.pay[data-v-8c1ad988]{position:fixed;left:0;right:0;bottom:0;width:%?750?%;height:%?88?%;background:#fe5960;font-size:%?32?%;color:#fff;line-height:%?88?%;text-align:center}.h5pay[data-v-8c1ad988]{border-radius:%?50?%;width:%?600?%;margin:0 auto;bottom:40%}",""]),e.exports=t},de73:function(e,t,i){"use strict";var n=i("ee27");i("c975"),i("d3b7"),i("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(i("1dca")),r={components:{buryingpoint:o.default},data:function(){return{orderId:"",orderNum:"",fee:0,id:"alipay",type:"wxpay",providerList:[],timer:null,orderInfo:"",body:"",tarUrl:"",recordId:null,active:"",isReport:!1,typeClass:"",ind:""}},onNavigationBarButtonTap:function(e){0==e.index&&uni.navigateBack({delta:1})},onLoad:function(e){this.recordId=e.recordId,this.tarUrl=e.tarUrl,this.body=e.body,this.fee=e.fee,this.orderId=e.orderId,this.orderNum=e.orderNum,this.active=e.active,this.typeClass=e.typeClass,this.ind=e.ind,void 0!=e.isReport&&(this.isReport=e.isReport)},onShow:function(){var e=this;setTimeout((function(){e.$refs.buryingpoint.Time()}),10),uni.request({url:this.$webUrl+this.$getH5PayStatus,header:{token:uni.getStorageSync("token")},method:"GET",data:{orderNum:this.orderNum},success:function(t){console.log(t),0==t.data.code&&1===t.data.data.payState&&e.paymentSuccess()},fail:function(e){}})},onHide:function(){this.$refs.buryingpoint.buryingpoint("支付")},onUnload:function(){this.$refs.buryingpoint.buryingpoint("支付")},methods:{toggleChecked:function(e){this.type=e},getOrderInfo:function(e){var t,i,n,o=this,r=o.orderId,a=o.orderNum,u=o.fee.toString();if("wxpay"===this.type){var s=1;i=o.$webUrl+o.$getUnifideOrderResult,s=20,i=o.$webUrl+o.$getH5OrderResult,t={orderFee:u,body:o.body,orderNum:a,orderId:r,paySource:s,userId:uni.getStorageSync("user_Id"),payType:1},n="GET"}else t={body:o.body,subject:o.body,orderNum:a,orderId:r,totalAmount:u},i=o.$webUrl+o.$AlipayPayment,n="POST";uni.request({url:i,header:{"content-type":"application/x-www-form-urlencoded",token:uni.getStorageSync("token")},method:n,data:t,success:function(e){window.location.href=e.data.mweb_url},fail:function(e){}})},requestPayment:function(){var e,t=this,i=this.type;e="wxpay"===this.type?this.orderInfo.data:this.orderInfo.data.data,200===this.orderInfo.statusCode&&uni.requestPayment({provider:i,orderInfo:e,success:function(e){t.paymentSuccess()},fail:function(e){console.log(JSON.stringify(e))}})},paymentSuccess:function(){var e=this;if(1==this.isReport)uni.showModal({title:"支付成功",content:"您可以选择返回或查看报告",cancelText:"查看报告",confirmText:"返回",success:function(t){t.confirm?uni.navigateBack({delta:1}):t.cancel&&(-1!=e.body.indexOf("站姿")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=tzcp"}):-1!=e.body.indexOf("坐姿")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=zuozicp"}):-1!=e.body.indexOf("走姿")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=zouzicp"}):-1!=e.body.indexOf("跑姿")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=paozicp"}):-1!=e.body.indexOf("生长")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=szfycp"}):-1!=e.body.indexOf("身高")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=sgdbcp"}):-1!=e.body.indexOf("体重")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=tzdbcp"}):-1!=e.body.indexOf("视力")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=slcp"}):-1!=e.body.indexOf("临床营养")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=yycp"}):-1!=e.body.indexOf("膳食营养")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=yyzqfa"}):-1!=e.body.indexOf("体质测评")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=tzhcp"}):-1!=e.body.indexOf("体质增强")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=tzzqfa"}):-1!=e.body.indexOf("功能评估")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=gncp"}):-1!=e.body.indexOf("功能增强")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=gnzqfa"}):-1!=e.body.indexOf("体能评估")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=tnzqcp"}):-1!=e.body.indexOf("体能增强")?uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=tnzqfa"}):-1!=e.body.indexOf("骨龄测评")&&uni.redirectTo({url:"/pages/center/ac-quiz/growth-list?active=glcp"}))}});else if("health"==this.isReport)uni.showToast({title:"支付成功",icon:"success",duration:2e3}),setTimeout((function(){uni.navigateBack({delta:1})}),1500);else if(this.body.indexOf("咨询")>-1)uni.showToast({icon:"none",title:"专家会尽快联系您!",duration:1e3}),setTimeout((function(){uni.redirectTo({url:"/pages/center/ac-quiz/advisory-list"})}),1e3);else if(this.body.indexOf("体姿检测")>-1){uni.showToast({icon:"none",title:"可以查看体姿报告详情了",duration:1e3});var t="/pages/body-posture/body-posture";uni.setStorageSync("PayReturn","PayReturn"),uni.setStorageSync("bodyPostureMsg",{recordId:this.recordId,payState:1}),setTimeout((function(){uni.switchTab({url:t})}),1e3)}else if(this.body.indexOf("坐姿")>-1||this.body.indexOf("跑姿")>-1||this.body.indexOf("走姿")>-1)uni.showToast({icon:"none",title:"报告生成中",duration:1e3}),setTimeout((function(){uni.navigateTo({url:"../body-posture/GoRun?ind="+e.ind})}),1e3);else if(this.body.indexOf("单项检测")>-1)uni.showToast({icon:"none",title:"报告生成中，请1分钟后查看!",duration:1e3}),setTimeout((function(){uni.navigateTo({url:"../body-posture/body-success"})}),1e3);else if(this.body.indexOf("课程")>-1){uni.showToast({icon:"none",title:"支付成功",duration:1e3});var i=uni.getStorageSync("dictNameInfo");setTimeout((function(){uni.navigateTo({url:e.tarUrl+"?courseId="+i.courseId+"&flag="+i.flag+"&dictName="+i.dictName})}),1e3)}else if(this.body.indexOf("会员")>-1){uni.setStorageSync("vip",1),uni.showToast({icon:"none",title:"支付成功",duration:1e3});uni.getStorageSync("dictNameInfo");setTimeout((function(){uni.navigateTo({url:e.tarUrl+"?type=super"})}),1e3)}else setTimeout((function(){uni.switchTab({url:"/pages/center/center"})}),300)}}};t.default=r}}]);