(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-communication-put-question"],{"0c26":function(e,t,i){"use strict";var n=i("ee27");i("a15b"),i("fb6a"),i("a434"),i("d3b7"),i("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(i("f3f3")),a=i("2f62"),r=n(i("7cf6")),s=n(i("1dca")),u={components:{buryingpoint:s.default},data:function(){return{token:"",content:"",modelId:"",channelId:"",description:"",upimgurl:[],showBtn:!0,uploadFileType:"",imanum:null}},onNavigationBarButtonTap:function(e){var t=this;0==e.index?uni.navigateBack({delta:1}):(clearTimeout(this.timer),this.timer=null,this.timer=setTimeout((function(){clearTimeout(t.timer),t.timer=null;var e=t.content,i=(t.channelId,t.modelId,"");if(t.upimgurl.length>0&&(i=t.upimgurl.slice(0,4).join(",")),e){var n=uni.getStorageSync("user_Info"),o={content:e,imgs:i,username:n.username,headSculpture:n.headSculpture},a=t;uni.request({url:a.$webUrl+a.$BbsTopicAdd,method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:a.token},data:o,success:function(e){0==e.data.code?(uni.showToast({icon:"none",title:"内容已发布，请等待审核通过",duration:2e3}),setTimeout((function(){uni.switchTab({url:"/pages/index/main"})}),2e3)):r.default.notLogin(e.data)}})}else uni.showToast({icon:"none",title:"请填写内容",duration:2e3})}),500))},onLoad:function(e){this.token=uni.getStorageSync("token")},onShow:function(){var e=this;setTimeout((function(){e.$refs.buryingpoint.Time()}),10)},onHide:function(){this.$refs.buryingpoint.buryingpoint("马上提问")},onUnload:function(){this.$refs.buryingpoint.buryingpoint("马上提问")},methods:(0,o.default)({},(0,a.mapActions)(["asyncGetUserArticleList"]),{input:function(e){this.content=e.detail.value},chooseFile:function(){var e=this;uni.chooseImage({count:4-e.upimgurl.length,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){e.imanum=0,e.uploadFile(t.tempFilePaths)}})},uploadFile:function(e){var t=this;if(uni.showLoading({title:"正在上传。。。"}),Array.isArray(e))for(var i=0;i<e.length;i++)uni.uploadFile({url:t.$webUrl+t.$upAvatar,filePath:e[i],fileType:"image",name:"file",formData:{type:12},success:function(i){if(200==i.statusCode){var n=JSON.parse(i.data.toString()).filename;n&&(t.upimgurl.push(n),t.imanum++,t.uploadFileType="img",4==t.upimgurl.length&&(t.showBtn=!1)),t.imanum==e.length&&uni.hideLoading()}else uni.showToast({icon:"none",title:"上传失败！",duration:2e3})},fail:function(e){uni.hideLoading()}})},previewImage:function(e){var t=this.upimgurl;uni.previewImage({current:this.upimgurl[e],urls:t})},deleteImg:function(e){this.upimgurl.splice(e,1),this.upimgurl.length<4&&(this.showBtn=!0),0==this.upimgurl.length&&(this.uploadFileType="")}})};t.default=u},"190f":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{system:null,route:null,systemType:null,Timer:null,DataTimeNum:0}},methods:{Time:function(){var e=this,t=getCurrentPages();this.route=t[t.length-1].route,this.Timer=setInterval((function(){e.DataTimeNum++}),1e3)},buryingpoint:function(e){var t,i=this,n=uni.getStorageSync("user_Id");uni.getSystemInfo({success:function(e){i.systemType=e}}),t="ios"==this.systemType.platform?2:1;var o={model:this.systemType.model,version:this.systemType.version,systemVersion:this.system,userId:n,platform:t,route:this.route,name:e,ttl:this.DataTimeNum};uni.request({url:this.$webUrl+this.$buryingpoint,method:"POST",data:o,success:function(e){0==e.data.code&&(clearInterval(i.Timer),i.DataTimeNum=0)},fail:function(e){console.log(JSON.stringify(e))}})}}};t.default=n},"1dca":function(e,t,i){"use strict";i.r(t);var n=i("50ee"),o=i("7003");for(var a in o)"default"!==a&&function(e){i.d(t,e,(function(){return o[e]}))}(a);var r,s=i("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"0f5ec893",null,!1,n["a"],r);t["default"]=u.exports},"287d":function(e,t,i){"use strict";var n={buryingpoint:i("1dca").default},o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"wrap"},[i("v-uni-view",{staticClass:"first-title"},[e._v("输入问题")]),i("v-uni-view",{staticClass:"top"},[i("v-uni-view",{staticClass:"msg"},[e._v("请留下你的问题，让大家帮你解决。")])],1),i("v-uni-textarea",{staticClass:"textarea-style",attrs:{value:"",maxlength:"100",placeholder:"请输入您想提问的问题","placeholder-class":"placeholder","placeholder-style":"font-size: 28upx;line-height: 40upx;color:#999999"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.input.apply(void 0,arguments)}}}),e.showBtn?i("v-uni-button",{staticClass:"chooseFileBtn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseFile.apply(void 0,arguments)}}},[e._v("上传文件("+e._s(e.upimgurl.length)+" / 4)")]):e._e(),e.upimgurl.length>0?i("v-uni-scroll-view",{staticClass:"scroll-x",attrs:{"scroll-x":"true"}},e._l(e.upimgurl,(function(t,n){return i("v-uni-view",{key:n,staticClass:"img-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage(n)}}},[i("v-uni-text",{staticClass:"iconfont",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.deleteImg(n)}}},[e._v("")]),i("v-uni-image",{attrs:{src:t,mode:"aspectFill"}})],1)})),1):e._e(),i("buryingpoint",{ref:"buryingpoint"})],1)},a=[];i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}))},"506b":function(e,t,i){"use strict";i.r(t);var n=i("287d"),o=i("aa7e");for(var a in o)"default"!==a&&function(e){i.d(t,e,(function(){return o[e]}))}(a);i("6805");var r,s=i("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"dec5dfc2",null,!1,n["a"],r);t["default"]=u.exports},"50ee":function(e,t,i){"use strict";var n,o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view")},a=[];i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}))},6805:function(e,t,i){"use strict";var n=i("e415"),o=i.n(n);o.a},7003:function(e,t,i){"use strict";i.r(t);var n=i("190f"),o=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},"7cf6":function(e,t,i){"use strict";var n=i("ee27");i("c975"),i("ac1f"),i("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(i("e143")),a={downBtn:function(){setTimeout((function(){var e=window.navigator.userAgent.toLowerCase();-1!=e.indexOf("huawei")?window.location="https://appgallery.cloud.huawei.com/uowap/index.html#/detailApp/C100740675?detailType=&subsource=C100740675&referrer=&s=&shareFrom=appmarket&v=&shareTo=weixin&source=appshare&id=&locale=zh_CN&channelId=":-1!=e.indexOf("vivo")?window.location="https://h5coml.vivo.com.cn/h5coml/appdetail_h5/browser_v2/index.html?appId=2757924&resource=301&source=2":-1!=e.indexOf("xiaomi")?window.location="http://app.xiaomi.com/detail/796164":-1!=e.indexOf("iphone")?window.location="https://apps.apple.com/cn/app/%E4%BD%93%E8%AF%AD/id1460747699":window.location="https://a.app.qq.com/o/simple.jsp?pkgname=com.tiyu.app&fromcase=40003"}),500)},notLogin:function(e){console.log("登陆失效验证："),console.log(JSON.stringify(e));var t=e.code,i=e.msg||e.error;if(100005001==t||100005002==t){uni.clearStorage(),i="token不能为空"==i?"未登录":i.replace(/token/g,"登录"),uni.showToast({icon:"none",title:i,duration:1500});getCurrentPages();setTimeout((function(){uni.navigateTo({url:"/pages/login/login"})}),1500)}else 100005015==t?(console.log(t),uni.setStorageSync("vip",0),uni.showToast({icon:"none",title:i,duration:1500}),setTimeout((function(){uni.navigateBack({delta:1})}),1500)):uni.showToast({icon:"none",title:i,duration:1500})},integralSave:function(e){var t=e.url,i=e.data,n=e.token,o=e.cb;n&&uni.request({url:t,method:"POST",header:{token:n},data:i,success:function(e){o&&o()}})},showModal:function(e,t){var i=this;uni.showModal({title:"提示",content:"注册会员，能够从任何iOS设备访问个人信息及内容，是否注册？",cancelText:"游客访问",confirmText:"注册登陆",success:function(n){n.confirm?uni.navigateTo({url:"../login/login"}):n.cancel&&i.visitorLogin({url:e,url2:t})}})},visitorLogin:function(e){var t=e.url,i=e.url2,n=this,o=plus.device.uuid;console.log(o),uni.request({url:t,data:{openId:o,unionid:o},success:function(e){console.log("获取用户信息"),console.log(JSON.stringify(e)),3==e.data.data.code?n.register(i,o):n.saveUserInfo(e.data.data)}})},register:function(e,t){var i=this;uni.request({url:e,method:"POST",data:{openid:t,unionid:t},success:function(e){console.log("注册"),console.log(JSON.stringify(e)),i.saveUserInfo(e.data.data)}})},saveUserInfo:function(e){uni.setStorage({key:"user_Info",data:{username:e.user.username,headSculpture:e.user.headSculpture,remarks:e.user.remarks,gender:e.user.gender,birthday:e.user.birthday,email:e.user.email,mobile:e.user.mobile}}),uni.setStorage({key:"user_Id",data:e.user.id}),uni.setStorage({key:"token",data:e.token}),uni.setStorage({key:"postureTestNumber",data:e.user.postureTestNumber})},statisticalClicks:function(e){var t=o.default.prototype;uni.request({url:t.$webUrl+t.$recordClicks,method:"POST",data:e,success:function(e){console.log("统计点击量 ："),console.log(e)},fail:function(e){console.log(e)}})},sharingApplet:function(e){console.log(JSON.stringify(e));var t=o.default.prototype,i=this,n=t.$userSharingRecord;void 0!=e.courseflag&&2==e.courseflag&&(n=t.$courseShareLock),uni.request({url:t.$webUrl+n,header:{token:e.token},data:{href:e.href,shareChannel:e.subMsg,shareContent:e.summary,shareImg:e.imageUrl,shareTitle:e.title,shareType:e.shareType,userId:e.userId,markId:e.id,module:e.module},method:"POST",success:function(n){console.log("分享记录"+JSON.stringify(n)),console.log(t.$webUrl),console.log(t.$userintegralrecord),i.integralSave({url:t.$webUrl+t.$userintegralrecord,data:{integralOperate:1,integralType:4,title:"分享送积分",userId:e.userId},token:e.token}),i.shareFun(e)},fail:function(e){uni.showToast({icon:"none",duration:3e3,title:"网络连接不稳定，请检查网络"})}})},shareFun:function(e){console.log("我进来了"),console.log(JSON.stringify(e)),uni.share({provider:"weixin",type:e.shareType,imageUrl:e.imageUrl,title:e.title,miniProgram:{id:"gh_bb081e4b31c9",path:e.href,type:0,webUrl:e.webHref},success:function(e){console.log(JSON.stringify(e))}})},getMembers:function(e,t,i){var n=this;uni.request({url:e,header:{"content-type":"application/x-www-form-urlencoded",token:t},data:{userId:i},method:"GET",success:function(e){if(0==e.data.code){var t=e.data.data;console.log(t),uni.setStorage({key:"memberInfo",data:t})}else n.notLogin(e.data)},fail:function(e){uni.showToast({icon:"none",duration:3e3,title:"网络连接不稳定，请检查网络"})}})}};t.default=a},"884b":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'.first-title[data-v-dec5dfc2]{font-size:%?36?%}.msg[data-v-dec5dfc2]{overflow:hidden;padding-right:%?30?%;font-size:%?24?%;font-weight:400;color:rgba(0,0,0,.7);line-height:%?44?%}.top>.switch-box[data-v-dec5dfc2]{float:right;font-size:%?28?%;line-height:%?34?%;color:#999}.list[data-v-dec5dfc2]{margin-top:%?40?%}.list[data-v-dec5dfc2]:after{content:"";display:table;clear:both}.item[data-v-dec5dfc2]{width:%?140?%;height:%?64?%;float:left;margin-right:%?30?%;margin-bottom:%?20?%;line-height:%?64?%;text-align:center;font-size:%?24?%;background:#fff;box-shadow:0 %?4?% %?8?% 0 rgba(0,0,0,.15);border-radius:%?8?%}.item[data-v-dec5dfc2]:nth-child(4n){margin-right:0}.textarea-style[data-v-dec5dfc2]{width:100%;height:%?400?%;padding:%?32?%;margin:%?40?% 0;font-size:%?24?%;line-height:%?40?%;box-sizing:border-box;border-radius:%?8?%;border:1px solid #c1c1c1}.placeholder[data-v-dec5dfc2]{font-size:%?28?%;font-family:PingFangSC-Regular;font-weight:400;color:rgba(0,0,0,.7);line-height:%?34?%}.scroll-x[data-v-dec5dfc2]{width:%?700?%;height:%?420?%;white-space:nowrap;\n\t/* padding-right: 20upx; */box-sizing:border-box}.btn[data-v-dec5dfc2]{width:%?196?%;height:%?196?%;\n\t/* float: left; */margin-right:%?18?%;padding-top:%?56?%;text-align:center;box-sizing:border-box;background:hsla(0,0%,87.8%,.75);border-radius:4px}.cross[data-v-dec5dfc2]{width:%?48?%;height:%?48?%;background:#fff;border:1px solid #9b9b9b;border-radius:50%}.btn-msg[data-v-dec5dfc2]{padding-top:%?20?%;font-size:%?24?%;color:#4a4a4a;line-height:%?28?%}.intro[data-v-dec5dfc2]{padding-left:%?18?%;overflow:hidden;font-size:%?24?%;font-family:PingFangSC-Regular;font-weight:400;color:rgba(0,0,0,.7);line-height:%?34?%}.img-container[data-v-dec5dfc2]{\n\t/* padding-left: 18upx; */overflow:hidden;overflow-x:scroll}.img-item[data-v-dec5dfc2]{position:relative;display:inline-block;width:%?280?%;height:%?420?%;margin-right:%?40?%;\n\t/* float: left; */word-wrap:break-word;white-space:pre-wrap;border-radius:%?8?%;overflow:hidden}.img-item>.iconfont[data-v-dec5dfc2]{position:absolute;right:0;top:0;display:inline-block;width:%?60?%;height:%?60?%;color:#03b2ca;text-align:center;line-height:%?60?%;border-radius:50%;font-size:%?30?%;font-weight:700;z-index:999}.img-item-btn[data-v-dec5dfc2]{width:%?196?%}.img-item>uni-image[data-v-dec5dfc2]{width:100%;border-radius:%?8?%;border:1px solid #e8e8e8;box-sizing:border-box}\n/* 上传文件 样式 */.scroll-x[data-v-dec5dfc2]{width:%?700?%;height:%?420?%;margin-top:%?50?%;white-space:nowrap;\n\t/* padding-right: 20upx; */box-sizing:border-box}uni-video[data-v-dec5dfc2]{margin-top:%?50?%}.chooseFileBtn[data-v-dec5dfc2]{background:#1bc4db;border-radius:4px;font-size:%?24?%;color:#fff}',""]),e.exports=t},aa7e:function(e,t,i){"use strict";i.r(t);var n=i("0c26"),o=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},e415:function(e,t,i){var n=i("884b");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("4f06").default;o("ee02c246",n,!0,{sourceMap:!1,shadowMode:!1})}}]);