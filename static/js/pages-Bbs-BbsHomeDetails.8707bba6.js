(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Bbs-BbsHomeDetails"],{"263f":function(t,n,e){var o=e("24fb");n=o(!1),n.push([t.i,".BbsPersonalInfo[data-v-ded826f6]{margin:0 %?44?%;height:%?206?%;border-bottom:%?2?% solid #ebebeb;padding-top:%?48?%;display:-webkit-box;display:-webkit-flex;display:flex}.BbsPersonalInfoImg[data-v-ded826f6]{width:%?142?%;height:%?142?%}.BbsPersonalInfoImg uni-image[data-v-ded826f6]{width:100%;height:100%;border-radius:50%}.BbsPersonalInfoFollow[data-v-ded826f6]{height:%?56?%;text-align:center;line-height:%?56?%;background:#1bc4db;border:%?2?% solid #1bc4db;border-radius:%?28?%;font-size:%?24?%;letter-spacing:1px;color:#fff;padding:0 %?20?%}.BbsPersonalInfoCont[data-v-ded826f6]{padding-left:%?32?%}.BbsPersonalInfoName[data-v-ded826f6]{width:%?480?%;font-size:%?36?%;letter-spacing:1px;color:#484848;padding-top:%?16?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.BbsPersonalInfoSee[data-v-ded826f6]{font-size:%?24?%;color:#919191;letter-spacing:1px;padding-top:%?20?%}.BbsPersonalInfoSee uni-text[data-v-ded826f6]{padding-right:%?10?%}.FollowShowCol[data-v-ded826f6]{background:#fff;color:#1bc4db;border:%?2?% solid #1bc4db}.BbsPersonalInfoTitle[data-v-ded826f6]{font-size:%?36?%;color:#484848;letter-spacing:1px;padding:0 %?44?%;padding-top:%?46?%}",""]),t.exports=n},4403:function(t,n,e){"use strict";var o=e("59f7"),i=e.n(o);i.a},"51bc":function(t,n,e){"use strict";e.r(n);var o=e("5c75"),i=e("9ddd");for(var s in i)"default"!==s&&function(t){e.d(n,t,(function(){return i[t]}))}(s);e("4403");var a,l=e("f0c5"),r=Object(l["a"])(i["default"],o["b"],o["c"],!1,null,"ded826f6",null,!1,o["a"],a);n["default"]=r.exports},"59f7":function(t,n,e){var o=e("263f");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=e("4f06").default;i("282834f3",o,!0,{sourceMap:!1,shadowMode:!1})},"5c75":function(t,n,e){"use strict";var o,i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[e("v-uni-view",{staticClass:"BbsPersonalInfo"},[e("v-uni-view",{staticClass:"BbsPersonalInfoImg"},[e("v-uni-image",{attrs:{mode:"aspectFill",src:t.Info.headSculpture}})],1),e("v-uni-view",{staticClass:"BbsPersonalInfoCont"},[e("v-uni-view",{staticClass:"BbsPersonalInfoName"},[e("v-uni-view",[t._v(t._s(t.Info.username))]),t.InfoId!==t.UserIdOwn?e("v-uni-view",{staticClass:"BbsPersonalInfoFollow",class:0!==t.FollowShow?"FollowShowCol":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.IsFollowShow.apply(void 0,arguments)}}},[t._v(t._s(0!==t.FollowShow?"取消关注":"关注"))]):t._e()],1),e("v-uni-view",{staticClass:"BbsPersonalInfoSee"},[e("v-uni-text",[t._v("关注"+t._s(t.Info.followCount>1e4?(t.Info.followCount-t.Info.followCount%1e3)/1e4+"w":t.Info.followCount))]),e("v-uni-text",[t._v("发表"+t._s(t.Info.topicCount>1e4?(t.Info.topicCount-t.Info.topicCount%1e3)/1e4+"w":t.Info.topicCount))]),e("v-uni-text",[t._v("粉丝"+t._s(t.Info.fansCount>1e4?(t.Info.fansCount-t.Info.fansCount%1e3)/1e4+"w":t.Info.fansCount))])],1)],1)],1),e("v-uni-view",{staticClass:"BbsPersonalInfoTitle"},[t._v("发表")]),t._l(t.pullOffData,(function(n,o){return e("v-uni-view",{key:n.id,on:{longpress:function(e){arguments[0]=e=t.$handleEvent(e),t.touchinUk(o,n.id,n.userId)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchend(n.userId)}}},[e("user-article",{key:o,attrs:{acceptData:n,Show:!1,ShowBtn:!0,Ellipsis:!0}})],1)}))],2)},s=[];e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return s})),e.d(n,"a",(function(){return o}))},"9ddd":function(t,n,e){"use strict";e.r(n);var o=e("d6c6"),i=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(n,t,(function(){return o[t]}))}(s);n["default"]=i.a},d6c6:function(t,n,e){"use strict";var o=e("ee27");e("a434"),e("e25e"),e("ac1f"),e("5319"),e("1276"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("0946")),s={components:{"user-article":i.default},data:function(){return{InfoId:null,Info:{},FollowShow:null,pullOffData:null,UserIdOwn:null,Loop:null}},onNavigationBarButtonTap:function(t){0==t.index&&uni.navigateBack({delta:1})},onLoad:function(t){this.InfoId=t.UserId,this.UserIdOwn=uni.getStorageSync("user_Id"),this.InfoSelect(),this.UserArticle()},watch:{pullOffData:function(t){console.log(1)}},methods:{touchinUk:function(t,n,e){if(this.UserIdOwn===e){var o=this;clearInterval(this.Loop),this.Loop=setTimeout(function(){uni.showModal({title:"删除",content:"请问要删除本条话题吗？",success:function(e){e.confirm?uni.request({url:o.$webUrl+o.$BbsDelectTopic,method:"GET",header:{token:uni.getStorageSync("token")},data:{topicId:n},success:function(n){o.pullOffData.splice(t,1),uni.showToast({icon:"none",title:"删除成功！",duration:2e3})},fail:function(t){console.log(JSON.stringify(t))}}):e.cancel&&console.log("用户点击取消")}})}.bind(this),1e3)}},touchend:function(t){this.UserIdOwn===t&&clearInterval(this.Loop)},IsFollowShow:function(){var t,n,e=this;this.FollowShow?(this.FollowShow=0,t=this.$BbsUserCancel,n="POST"):(this.FollowShow=1,t=this.$BbsUserfollow,n="POST"),uni.request({url:this.$webUrl+t,header:{"content-type":"application/x-www-form-urlencoded",token:uni.getStorageSync("token")},method:n,data:{userId:this.UserIdOwn,followId:this.InfoId},success:function(t){0===t.data.code&&(0===e.FollowShow?(--e.Info.fansCount,uni.showToast({icon:"none",title:"取消关注！",duration:2e3})):(++e.Info.fansCount,uni.showToast({icon:"none",title:"关注成功！",duration:2e3})))},fail:function(t){console.log(JSON.stringify(t))}})},InfoSelect:function(){var t=this;uni.request({url:this.$webUrl+this.$BbsUserInfo,method:"GET",data:{targetUserId:this.InfoId,userId:uni.getStorageSync("user_Id")},success:function(n){t.Info=n.data.data,t.FollowShow=t.Info.followStatus},fail:function(t){console.log(JSON.stringify(t))}})},UserArticle:function(){var t=this,n={classify:3,userId:uni.getStorageSync("user_Id"),targetUserId:this.InfoId};uni.request({url:this.$webUrl+this.$BbsHomeList,method:"GET",data:n,success:function(n){for(var e=n.data.data.list,o=0;o<e.length;o++)t.getDate(e[o].inTime),e[o].inTime=t.timeNum,e[o].imgs&&(e[o].imgs=e[o].imgs.split(",")),t.pullOffData=e},fail:function(t){console.log(JSON.stringify(t))}})},getDate:function(t){var n=6e4,e=60*n,o=24*e,i=30*o;if(void 0==t)return!1;t=t.replace(/\-/g,"/");var s=new Date(t).getTime(),a=(new Date).getTime(),l=a-s,r=l/i,f=l/(7*o),u=l/o,d=l/e,c=l/n;this.timeNum=r>=1?parseInt(r)+"月前":f>=1?parseInt(f)+"周前":u>=1?parseInt(u)+"天前":d>=1?parseInt(d)+"小时前":c>=1?parseInt(c)+"分钟前":"刚刚"}}};n.default=s}}]);