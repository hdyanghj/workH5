(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-body-test-eyesight-test"],{"190f":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{system:null,route:null,systemType:null,Timer:null,DataTimeNum:0}},methods:{Time:function(){var t=this,e=getCurrentPages();this.route=e[e.length-1].route,this.Timer=setInterval((function(){t.DataTimeNum++}),1e3)},buryingpoint:function(t){var e,i=this,s=uni.getStorageSync("user_Id");uni.getSystemInfo({success:function(t){i.systemType=t}}),e="ios"==this.systemType.platform?2:1;var a={model:this.systemType.model,version:this.systemType.version,systemVersion:this.system,userId:s,platform:e,route:this.route,name:t,ttl:this.DataTimeNum};uni.request({url:this.$webUrl+this.$buryingpoint,method:"POST",data:a,success:function(t){0==t.data.code&&(clearInterval(i.Timer),i.DataTimeNum=0)},fail:function(t){console.log(JSON.stringify(t))}})}}};e.default=s},"1dca":function(t,e,i){"use strict";i.r(e);var s=i("50ee"),a=i("7003");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);var o,r=i("f0c5"),c=Object(r["a"])(a["default"],s["b"],s["c"],!1,null,"0f5ec893",null,!1,s["a"],o);e["default"]=c.exports},2420:function(t,e,i){"use strict";i.r(e);var s=i("73b5"),a=i("9219");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("f5b0");var o,r=i("f0c5"),c=Object(r["a"])(a["default"],s["b"],s["c"],!1,null,"47a7b6ce",null,!1,s["a"],o);e["default"]=c.exports},3741:function(t,e,i){var s=i("5d71");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var a=i("4f06").default;a("071da19e",s,!0,{sourceMap:!1,shadowMode:!1})},"50ee":function(t,e,i){"use strict";var s,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view")},n=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return s}))},"5d71":function(t,e,i){var s=i("24fb");e=s(!1),e.push([t.i,".head-img-content[data-v-47a7b6ce]{position:absolute;top:%?240?%;left:%?40?%}.head-img-content uni-text[data-v-47a7b6ce]{font-size:%?40?%;color:#fff}.head-img-content uni-view[data-v-47a7b6ce]{font-size:%?24?%;color:#fff;margin-top:%?16?%}.img uni-image[data-v-47a7b6ce]{width:100%;height:%?400?%}.display-row[data-v-47a7b6ce]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.display-column[data-v-47a7b6ce]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.eyes-img uni-image[data-v-47a7b6ce]{width:%?100?%;height:%?80?%;margin-bottom:%?20?%}.eyes-img uni-text[data-v-47a7b6ce]{font-size:%?24?%}.color-pink[data-v-47a7b6ce]{color:#d05c7e}.color-gray[data-v-47a7b6ce]{color:#ccc}.color-blue[data-v-47a7b6ce]{color:#1bc4db}.eyes-test-info uni-view[data-v-47a7b6ce]:nth-child(1){color:#484848;font-size:%?36?%}.test-finally[data-v-47a7b6ce]{color:#969696;font-size:%?28?%;margin:%?16?% %?0?%}.test-true[data-v-47a7b6ce]{color:#1bc4db;padding-right:%?20?%}.test-false[data-v-47a7b6ce]{color:#f9573c}.test-way[data-v-47a7b6ce]{width:%?200?%;height:%?54?%;background:#f6f6f6;border-radius:%?30?%;color:#969696;font-size:%?28?%;text-align:center;line-height:%?54?%}.test-way uni-text[data-v-47a7b6ce]:nth-child(1){padding-right:%?16?%}.eyesight-e[data-v-47a7b6ce]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:absolute;top:%?710?%;height:%?360?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.mask[data-v-47a7b6ce]{position:fixed;z-index:1000;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.4)}.confirm[data-v-47a7b6ce]{position:absolute;width:%?600?%;height:%?300?%;left:50%;top:50%;margin-left:%?-300?%;margin-top:%?-150?%;background-color:#fff;border-radius:%?20?%;font-size:%?32?%}.cfm-content[data-v-47a7b6ce]{height:%?200?%;line-height:%?200?%;text-align:center;color:#484848}.btn-item[data-v-47a7b6ce]{border-top:2px solid rgba(72,72,72,.05)}.btn-item uni-text[data-v-47a7b6ce]{height:%?100?%;width:%?300?%;color:#1bc4db;text-align:center;line-height:%?100?%}.btn-item uni-text[data-v-47a7b6ce]:nth-child(1){border-right:2px solid rgba(72,72,72,.05)}#btn-item-text[data-v-47a7b6ce]{width:100%}.direction[data-v-47a7b6ce]{font-size:%?84?%;color:#ebebeb;position:absolute}.direction-top[data-v-47a7b6ce]{-webkit-transform:rotate(-90deg);transform:rotate(-90deg);left:45%;top:%?700?%}.direction-left[data-v-47a7b6ce]{-webkit-transform:rotate(-180deg);transform:rotate(-180deg);top:%?840?%;left:20%}.direction-right[data-v-47a7b6ce]{top:%?840?%;right:20%}.direction-bottom[data-v-47a7b6ce]{-webkit-transform:rotate(-270deg);transform:rotate(-270deg);left:45%;top:%?980?%}",""]),t.exports=e},7003:function(t,e,i){"use strict";i.r(e);var s=i("190f"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=a.a},"72d4":function(t,e,i){"use strict";var s=i("ee27");i("4160"),i("c975"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("f3f3")),n=i("2f62"),o=s(i("1dca")),r={components:{buryingpoint:o.default},data:function(){return{leftEyesSrc:"../../static/eyes-left.png",rightEyesSrc:"../../static/eyes-right-gray.png",ewidth:"",eheight:"",active:!0,imgSrc:"",eArr:["../../static/eTop.png","../../static/eLeft.png","../../static/eBottom.png","../../static/eRight.png"],Esize:[{value:"3.7/0.05",size:7.26},{value:"3.8/0.06",size:5.76},{value:"3.9/0.08",size:4.58},{value:"4.0/0.1",size:3.64},{value:"4.1/0.12",size:2.89},{value:"4.2/0.15",size:2.3},{value:"4.3/0.2",size:1.82},{value:"4.4/0.25",size:1.45},{value:"4.5/0.3",size:1.15},{value:"4.6/0.4",size:.91},{value:"4.7/0.5",size:.73},{value:"4.8/0.6",size:.58},{value:"4.9/0.8",size:.46},{value:"5.0/1.0",size:.36},{value:"5.1/1.2",size:.29}],nowTestValue:0,startX:0,startY:0,moveEndX:0,moveEndY:0,recordOfTrue:0,recordOfFalse:0,direction:"",slideNum:0,slideLevel:0,maskDisplay:!1,chooseEyes:0,leftEyesightArr:[],rightEyesightArr:[],flag:!1,memberId:"",memberName:"",memberSex:"",memberAge:0,operation:"",oldRandom:null,brightnessNum:0,startTime:0}},computed:(0,a.default)({},(0,n.mapGetters)(["getLeftEyesightArr","getRightEyesightArr"])),onShow:function(){var t=this;setTimeout((function(){t.$refs.buryingpoint.Time()}),10),console.log(uni.getStorageSync("back")),console.log(uni.getStorageSync("eyesightFlag")),console.log(this.chooseEyes),1==uni.getStorageSync("eyesightFlag")&&(0==this.chooseEyes?(this.chooseEyes=1,this.active=!0):(this.chooseEyes=0,this.active=!1),this.setChooseEyes(),this.clearVar(),this.nowTestValue="3.7/0.05",this.setESize()),1==uni.getStorageSync("back")&&(this.clearVar(),this.clearArr(),this.$store.state.center.leftEyesightArr=[],this.$store.state.center.rightEyesightArr=[],this.nowTestValue="3.7/0.05",this.setESize(),uni.setStorageSync("eyesightFlag",!1),this.handleEyesImg(0))},onLoad:function(t){uni.setStorageSync("eyesightFlag",!1),this.nowTestValue="3.7/0.05",this.setDirection(),this.setESize(),this.memberId=t.memberId,this.memberName=t.memberName,this.memberSex=t.memberSex,this.memberAge=t.memberAge,this.operation=t.operation,t.choose,0==t.choose?(this.chooseEyes=1,this.active=!0):(this.chooseEyes=0,this.active=!1),this.setChooseEyes(),this.nowTestValue="3.7/0.05"},onHide:function(){this.$refs.buryingpoint.buryingpoint("视力测评选择")},onUnload:function(){this.$refs.buryingpoint.buryingpoint("视力测评选择")},onNavigationBarButtonTap:function(t){"结束检测"==t.text?"3.7/0.05"==this.nowTestValue?uni.showToast({icon:"none",duration:3e3,title:"还未开始测评"}):(uni.setStorageSync("eyesightFlag",!0),"update"==this.operation?uni.navigateBack({delta:1}):(this.operation="",uni.navigateTo({url:"/pages/body-test/eyesight-test-result?memberId="+this.memberId+"&memberName="+this.memberName+"&memberSex="+this.memberSex+"&memberAge="+this.memberAge+"&source=0"}))):uni.navigateBack({delta:1})},methods:(0,a.default)({cancel:function(){this.maskDisplay=!1,0==this.chooseEyes?this.chooseEyes=1:this.chooseEyes=0},clearVar:function(){this.recordOfTrue=0,this.recordOfFalse=0,this.slideNum=0,this.slideLevel=0,this.maskDisplay=!1},clearArr:function(){this.leftEyesightArr=[],this.setLeftEyesightArr(this.leftEyesightArr),this.rightEyesightArr=[],this.setRightEyesightArr(this.rightEyesightArr)},continueTest:function(){this.setChooseEyes(),this.maskDisplay=!1,this.recordOfTrue=0,this.recordOfFalse=0,this.slideNum=0,this.maskDisplay=!1,this.clearArr()},resetTest:function(){this.setChooseEyes(),this.maskDisplay=!1,this.clearVar(),this.clearArr(),this.nowTestValue="3.7/0.05",this.setESize()},handleEyesImg:function(t){this.chooseEyes=t,"update"==this.operation?this.maskDisplay=!0:("3.7/0.05"==this.nowTestValue||this.continueState)&&0==uni.getStorageSync("eyesightFlag")?this.setChooseEyes():this.maskDisplay=!0},setChooseEyes:function(){0==this.chooseEyes?(this.active=!0,this.leftEyesSrc="../../static/eyes-left.png",this.rightEyesSrc="../../static/eyes-right-gray.png"):(this.active=!1,this.leftEyesSrc="../../static/eyes-left-gray.png",this.rightEyesSrc="../../static/eyes-right.png")},setDirection:function(){var t=Math.floor(4*Math.random());this.oldRandom==t&&(0==t&&t++,3==t&&t--,t++),this.oldRandom=t,this.imgSrc=this.eArr[t]},setESize:function(){var t=this,e=0;uni.getSystemInfo({success:function(t){e=Math.sqrt(t.screenWidth*t.screenWidth+t.screenHeight*t.screenHeight)/t.pixelRatio}}),this.Esize.forEach((function(i){if(i.value==t.nowTestValue){var s=i.size/25.4*e/3;t.ewidth=s,t.eheight=s}}))},touchStart:function(t){this.startTime=t.timeStamp,this.startX=t.touches[0].pageX,this.startY=t.touches[0].pageY},touchMove:function(t){this.moveEndX=t.touches[0].pageX,this.moveEndY=t.touches[0].pageY;var e=this.moveEndX-this.startX,i=this.moveEndY-this.startY;Math.abs(e)>Math.abs(i)&&e>0?this.direction="Right":Math.abs(e)>Math.abs(i)&&e<0?this.direction="Left":Math.abs(i)>Math.abs(e)&&i>0?this.direction="Bottom":Math.abs(i)>Math.abs(e)&&i<0&&(this.direction="Top")},touchEnd:function(t){var e=t.timeStamp;if(Math.abs(e-this.startTime)>100&&0!=this.moveEndX&&0!=this.moveEndY){this.moveEndX=0,this.moveEndY=0;var i=this.nowTestValue.indexOf("/"),s=this.nowTestValue.substring(0,i),a=this.nowTestValue.substring(i+1);if(this.slideNum++,-1!=this.imgSrc.indexOf(this.direction)?this.recordOfTrue++:this.recordOfFalse++,3!=this.recordOfTrue&&(3==this.recordOfFalse||5==this.slideNum))return this.eyesightTestData(s,a),uni.setStorageSync("eyesightFlag",!0),void("update"==this.operation?uni.navigateBack({delta:1}):(this.operation="",this.brightnessNum=0,uni.navigateTo({url:"/pages/body-test/eyesight-test-result?memberId="+this.memberId+"&memberName="+this.memberName+"&memberSex="+this.memberSex+"&memberAge="+this.memberAge+"&source=0"})));if(this.setDirection(),3==this.recordOfTrue){if(this.eyesightTestData(s,a),"5.1/1.2"==this.nowTestValue)return uni.setStorageSync("eyesightFlag",!0),void("update"==this.operation?uni.navigateBack({delta:1}):(this.operation="",this.brightnessNum=0,uni.navigateTo({url:"/pages/body-test/eyesight-test-result?memberId="+this.memberId+"&memberName="+this.memberName+"&memberSex="+this.memberSex+"&memberAge="+this.memberAge+"&source=0"})));this.slideLevel++,this.slideNum=0,this.recordOfTrue=0,this.recordOfFalse=0,this.nowTestValue=this.Esize[this.slideLevel].value,this.setESize()}}},eyesightTestData:function(t,e){0==this.chooseEyes?(this.leftEyesightArr.unshift({crrect:this.recordOfTrue,error:this.recordOfFalse,visionCs:t,visionIs:e}),this.setLeftEyesightArr(this.leftEyesightArr)):(this.rightEyesightArr.unshift({crrect:this.recordOfTrue,error:this.recordOfFalse,visionCs:t,visionIs:e}),this.setRightEyesightArr(this.rightEyesightArr))}},(0,n.mapMutations)(["setLeftEyesightArr","setRightEyesightArr"]))};e.default=r},"73b5":function(t,e,i){"use strict";var s={buryingpoint:i("1dca").default},a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-uni-view",{staticClass:"eyes-test"},[s("v-uni-view",{staticClass:"img"},[s("v-uni-image",{attrs:{src:i("fc5e"),mode:""}}),s("v-uni-view",{staticClass:"head-img-content"},[s("v-uni-text",[t._v("视力测评")]),s("v-uni-view",[t._v("用手指滑动来确认您所看到的方向")])],1)],1),s("v-uni-view",{staticClass:"wrap display-row"},[s("v-uni-view",{staticClass:"display-column eyes-img",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleEyesImg(0)}}},[s("v-uni-image",{attrs:{src:t.leftEyesSrc}}),s("v-uni-text",{class:[t.active?"color-pink":"color-gray"]},[t._v("左眼")])],1),s("v-uni-view",{staticClass:"display-column eyes-test-info"},[s("v-uni-view",{staticClass:"test-finally"},[s("v-uni-text",[t._v("正确："),s("v-uni-text",{staticClass:"test-true"},[t._v(t._s(t.recordOfTrue))])],1),s("v-uni-text",[t._v("错误："),s("v-uni-text",{staticClass:"test-false"},[t._v(t._s(t.recordOfFalse))])],1)],1),s("v-uni-view",{staticClass:"test-way"},[s("v-uni-text",[t._v("裸眼")]),s("v-uni-text",[t._v("25cm")])],1)],1),s("v-uni-view",{staticClass:"display-column eyes-img",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleEyesImg(1)}}},[s("v-uni-image",{attrs:{src:t.rightEyesSrc}}),s("v-uni-text",{class:[t.active?"color-gray":"color-blue"]},[t._v("右眼")])],1)],1),s("v-uni-text",{staticClass:"iconfont direction direction-top"},[t._v("")]),s("v-uni-text",{staticClass:"iconfont direction direction-left"},[t._v("")]),s("v-uni-text",{staticClass:"iconfont direction direction-right"},[t._v("")]),s("v-uni-text",{staticClass:"iconfont direction direction-bottom"},[t._v("")]),s("v-uni-view",{staticClass:"eyesight-e",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchMove(e)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchEnd(e)}}},[s("v-uni-image",{style:"width:"+t.ewidth+"px;height:"+t.eheight+"px",attrs:{src:t.imgSrc,mode:""}})],1),t.maskDisplay?s("v-uni-view",{staticClass:"mask"},["update"==t.operation?s("v-uni-view",{staticClass:"confirm"},[s("v-uni-view",{staticClass:"cfm-content"},[t._v("当前眼睛重新测评未完成")]),s("v-uni-view",{staticClass:"display-row btn-item"},[s("v-uni-text",{staticClass:"continue-test",attrs:{id:"btn-item-text"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t._v("确定")])],1)],1):t._e(),"update"!=t.operation?s("v-uni-view",[t.flag?t._e():s("v-uni-view",{staticClass:"confirm"},[s("v-uni-view",{staticClass:"cfm-content"},[t._v("左右眼切换")]),s("v-uni-view",{staticClass:"display-row btn-item"},[s("v-uni-text",{staticClass:"continue-test",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.continueTest.apply(void 0,arguments)}}},[t._v("继续测评")]),s("v-uni-text",{staticClass:"reset-test",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resetTest.apply(void 0,arguments)}}},[t._v("重新测评")])],1)],1),t.flag?s("v-uni-view",{staticClass:"confirm"},[s("v-uni-view",{staticClass:"cfm-content"},[t._v("当前眼睛已测评，是否重新测评？")]),s("v-uni-view",{staticClass:"display-row btn-item"},[s("v-uni-text",{staticClass:"continue-test",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t._v("取消")]),s("v-uni-text",{staticClass:"reset-test",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resetTest.apply(void 0,arguments)}}},[t._v("确定")])],1)],1):t._e()],1):t._e()],1):t._e(),s("buryingpoint",{ref:"buryingpoint"})],1)},n=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return s}))},9219:function(t,e,i){"use strict";i.r(e);var s=i("72d4"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=a.a},f5b0:function(t,e,i){"use strict";var s=i("3741"),a=i.n(s);a.a},fc5e:function(t,e,i){t.exports=i.p+"static/img/eyesight-head-img1.fbc07e41.png"}}]);