(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-phonelogin"],{"190f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{system:null,route:null,systemType:null,Timer:null,DataTimeNum:0}},methods:{Time:function(){var e=this,t=getCurrentPages();this.route=t[t.length-1].route,this.Timer=setInterval((function(){e.DataTimeNum++}),1e3)},buryingpoint:function(e){var t,n=this,i=uni.getStorageSync("user_Id");uni.getSystemInfo({success:function(e){n.systemType=e}}),t="ios"==this.systemType.platform?2:1;var o={model:this.systemType.model,version:this.systemType.version,systemVersion:this.system,userId:i,platform:t,route:this.route,name:e,ttl:this.DataTimeNum};uni.request({url:this.$webUrl+this.$buryingpoint,method:"POST",data:o,success:function(e){0==e.data.code&&(clearInterval(n.Timer),n.DataTimeNum=0)},fail:function(e){console.log(JSON.stringify(e))}})}}};t.default=i},"1dca":function(e,t,n){"use strict";n.r(t);var i=n("50ee"),o=n("7003");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var s,r=n("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"0f5ec893",null,!1,i["a"],s);t["default"]=u.exports},"1e1e":function(e,t,n){"use strict";n.r(t);var i=n("ad20"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"42cb":function(e,t,n){"use strict";n.r(t);var i=n("7039"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"50ee":function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view")},a=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},"6a96":function(e,t,n){"use strict";var i=n("6b10"),o=n.n(i);o.a},"6b10":function(e,t,n){var i=n("c4d3");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("3a0697c7",i,!0,{sourceMap:!1,shadowMode:!1})},7003:function(e,t,n){"use strict";n.r(t);var i=n("190f"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},7039:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{platform:String},data:function(){return{login:"",userInfo:{}}},mounted:function(){var e=this;console.log(this.platform),"weixin"==this.platform&&uni.login({provider:this.platform,success:function(t){console.log(JSON.stringify(t)),e.login=e.platform,uni.getUserInfo({provider:e.login,success:function(t){console.log(JSON.stringify(t.userInfo)),e.hasUserInfo=!0,e.userInfo=t.userInfo,uni.setStorage({key:"weixinMsg",data:e.userInfo}),e.weixinLogin()},fail:function(e){var t=JSON.stringify(e);console.log(t),uni.showToast({icon:"none",duration:3e3,title:"网络连接不稳定，请检查网络"})}})},fail:function(t){e.$emit("codeClick",!1),uni.showToast({icon:"none",duration:3e3,title:"网络连接不稳定，请检查网络"})}})},methods:{weixinLogin:function(){var e=this;console.log(this.userInfo.openId),console.log(this.userInfo.unionId),uni.request({url:this.$webUrl+this.$getUserInfo,header:{"content-type":"application/x-www-form-urlencoded"},data:{openId:this.userInfo.openId,unionId:this.userInfo.unionId},method:"GET",success:function(t){var n=t.data.data;if(console.log(JSON.stringify(t)),0==n.code){var i=n.user;uni.setStorage({key:"user_Info",data:{username:i.username,headSculpture:i.headSculpture,remarks:i.remarks,gender:i.gender,birthday:i.birthday,email:i.email,mobile:i.mobile}}),uni.setStorage({key:"AreaCode",data:{phoneNumber:i.mobile,code:"86"}}),uni.setStorageSync("vip",i.vip),uni.setStorageSync("user_Id",i.id),uni.setStorageSync("token",n.token),uni.setStorageSync("isHint",1),uni.setStorageSync("postureTestNumber",i.postureTestNumber),uni.navigateBack({delta:1})}if(3==n.code&&uni.navigateTo({url:"/pages/login/bind-phone"}),4==n.code){var o=n.user,a=o.mobile;e.bindMsg(a)}},fail:function(e){uni.showToast({icon:"none",duration:3e3,title:"网络连接不稳定，请检查网络"})},complete:function(){e.loading=!1}})},clientId:function(e){var t=plus.push.getClientInfo(),n=t.clientid;uni.request({url:this.$webUrl+this.$bindAlias,header:{"content-type":"application/x-www-form-urlencoded",token:e},data:{clientId:n},method:"POST",success:function(e){console.log(JSON.stringify(e))}})},bindMsg:function(e){console.log(44444444444444444e8),uni.request({url:this.$webUrl+this.$save,data:{openid:this.userInfo.openId,avatarurl:this.userInfo.avatarUrl,city:this.userInfo.city,province:this.userInfo.province,country:this.userInfo.country,gender:this.userInfo.gender,mobile:e,nickname:this.userInfo.nickName,unionid:this.userInfo.unionId},method:"POST",success:function(e){var t=e.data.data,n=t.user;console.log(JSON.stringify(n)),uni.setStorage({key:"user_Info",data:{username:n.username,headSculpture:n.headSculpture,remarks:n.remarks,gender:n.gender,birthday:n.birthday,email:n.email,mobile:n.mobile}}),uni.setStorage({key:"user_Id",data:n.id}),uni.setStorage({key:"token",data:t.token}),uni.setStorage({key:"isHint",data:1}),uni.setStorage({key:"postureTestNumber",data:n.postureTestNumber}),uni.navigateBack({delta:2})},fail:function(e){uni.showToast({icon:"none",duration:3e3,title:"网络连接不稳定，请检查网络"})}})}}};t.default=i},"9eda":function(e,t,n){"use strict";var i={WeChat:n("edd2").default,buryingpoint:n("1dca").default},o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"login-body",style:{height:e.winHeight+"px"}},[n("v-uni-view",{staticClass:"login-title"},[e._v("登录")]),n("v-uni-view",{staticClass:"login-mobile"},[e._v("手机号")]),n("v-uni-view",{staticClass:"login-mobile-cont"},[n("v-uni-view",{staticClass:"login-gsd"},[e._v("+"+e._s(e.areaCode))]),n("v-uni-view",{staticClass:"login-mobile-input"},[n("v-uni-input",{staticClass:"login-input",attrs:{focus:!0,autofocus:"autofocus",type:"number",maxlength:"11",value:e.mobile},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)},input:function(t){arguments[0]=t=e.$handleEvent(t),e.search(t)}}})],1)],1),n("v-uni-view",{staticClass:"login-button"},[n("v-uni-button",{staticClass:"normalButton",attrs:{disabled:e.disaBled},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.obtainCode()}}},[e._v("获取手机验证码")])],1),n("v-uni-view",{staticClass:"login-code"},[n("v-uni-view",{staticClass:"login-code-tishi",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.signIn.apply(void 0,arguments)}}},[e._v("新账号注册")]),n("v-uni-view",{staticClass:"login-code-pass",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.passwordLogin.apply(void 0,arguments)}}},[e._v("密码登录")])],1),n("v-uni-view",{staticClass:"Tripartite"},[n("v-uni-view",{staticClass:"pact-footer"},[n("v-uni-view",{staticClass:"pact-footer-cont"},[e._v("登录表明已阅读并接受"),n("v-uni-text",{staticClass:"pact-footer-text",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.termsb.apply(void 0,arguments)}}},[e._v("用户协议")]),e._v("和"),n("v-uni-text",{staticClass:"pact-footer-text",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.policy.apply(void 0,arguments)}}},[e._v("隐私政策")])],1)],1)],1),e.weChat?n("WeChat",{attrs:{platform:e.platform},on:{codeClick:function(t){arguments[0]=t=e.$handleEvent(t),e.codeClick.apply(void 0,arguments)}}}):e._e(),n("buryingpoint",{ref:"buryingpoint"})],1)},a=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},ad20:function(e,t,n){"use strict";var i=n("ee27");n("d81d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("edd2")),a=i(n("1dca")),s={data:function(){return{mobile:"",areaCode:"86",disaBled:!0,winHeight:0,providerList:[],platform:"",weChat:!1,flag:0}},components:{buryingpoint:a.default,WeChat:o.default},onShow:function(){var e=this;setTimeout((function(){e.$refs.buryingpoint.Time()}),10)},onHide:function(){this.$refs.buryingpoint.buryingpoint("免密码登录")},onUnload:function(){this.$refs.buryingpoint.buryingpoint("免密码登录")},onLoad:function(e){var t=this;this.flag=e.flag,uni.getProvider({service:"oauth",success:function(e){t.providerList=e.provider.map((function(e){switch(e){case"weixin":return{name:"../../static/login-weixin.png",id:e,show:!0};case"qq":return{name:"../../static/login-qq.png",id:e,show:!1};case"sinaweibo":return{name:"../../static/login-weibo.png",id:e,show:!1}}}))},fail:function(e){uni.showToast({icon:"none",duration:3e3,title:"网络连接不稳定，请检查网络"})}})},mounted:function(){this.winHeight=uni.getSystemInfoSync().windowHeight,this.aCode()},methods:{aCode:function(){var e=this,t=uni.getStorageSync("AreaCode").code,n=uni.getStorageSync("AreaCode").phoneNumber;uni.getStorageSync("AreaCode")&&(""!=t&&(e.areaCode=t,e.mobile=n),11==n.length&&(e.disaBled=!1))},bindLogin:function(e){this.platform=e.id,this.weChat=!0},codeClick:function(e){this.weChat=e},signIn:function(){uni.navigateTo({url:"sign-in"})},passwordLogin:function(){uni.redirectTo({url:"login"})},termsb:function(){uni.navigateTo({url:"/pages/center/account/user-agreement"})},policy:function(){uni.navigateTo({url:"/pages/center/account/privacy-protocol"})},search:function(e){var t=this,n=e.detail.value.length;t.mobile=e.detail.value,uni.setStorage({key:"AreaCode",data:{phoneNumber:t.mobile,code:t.areaCode}}),t.disaBled=11!=n},obtainCode:function(e){var t=this,n=/^1[3456789]\d{9}$/;n.test(t.mobile)?uni.setStorage({key:"AreaCode",data:{phoneNumber:t.mobile,code:t.areaCode},success:function(){uni.navigateTo({url:"yanzhengma?flag="+t.flag})}}):uni.showToast({icon:"none",duration:3e3,title:"手机格式不正确"})}}};t.default=s},be31:function(e,t,n){"use strict";n.r(t);var i=n("9eda"),o=n("1e1e");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("6a96");var s,r=n("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"d73ec146",null,!1,i["a"],s);t["default"]=u.exports},c4d3:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,".login-body[data-v-d73ec146]{width:%?660?%;margin:0 auto;position:relative}.login-title[data-v-d73ec146]{margin:0}.login-mobile[data-v-d73ec146],.login-password[data-v-d73ec146]{font-size:%?34?%;color:#4a4a4a}.login-mobile-cont[data-v-d73ec146]{width:100%;height:%?54?%;padding:%?40?% 0 %?10?%;border-bottom:1px solid #efefef;display:-webkit-box;display:-webkit-flex;display:flex;position:relative}.login-gsd[data-v-d73ec146]{border:1px solid #ccc;padding:%?5?% %?20?%;font-size:%?30?%}.login-mobile-input[data-v-d73ec146]{padding-left:%?20?%}.login-input[data-v-d73ec146]{width:%?540?%;font-size:%?32?%;height:%?54?%;line-height:%?54?%;border:none;outline:none}.login-password[data-v-d73ec146]{padding-top:%?50?%}.login-xianshi[data-v-d73ec146]{height:%?54?%;line-height:%?54?%;position:absolute;right:%?0?%;top:%?40?%;font-size:%?26?%;color:#03b2ca}.login-button[data-v-d73ec146]{padding-top:%?100?%}.login-code[data-v-d73ec146]{padding-top:%?40?%;font-size:%?26?%;color:#03b2ca;display:-webkit-box;display:-webkit-flex;display:flex}.login-code-tishi[data-v-d73ec146]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:left}.login-code-pass[data-v-d73ec146]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:right}.Tripartite-icon.button-hover[data-v-d73ec146]{background:none!important}",""]),e.exports=t},cf43:function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"content"})},a=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},edd2:function(e,t,n){"use strict";n.r(t);var i=n("cf43"),o=n("42cb");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var s,r=n("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"905be958",null,!1,i["a"],s);t["default"]=u.exports}}]);